(()=>{"use strict";let e=document.querySelector(".todo-header__btn"),t=document.querySelector(".todo-header__input"),s=document.querySelector(".tasks"),a=document.getElementsByClassName("tasks__task-item__checkbox"),n=document.querySelector(".btns__complete"),c=document.querySelector(".btns__remove"),l=document.querySelector(".btns__select"),i=document.querySelector(".btns__clear"),o=localStorage.getItem("items")?JSON.parse(localStorage.getItem("items")):[];function r(e,t=""){if(o.length<s.children.length){let s=Object.assign({id:t},{text:e},{isComplete:!1});o.push(s)}else if(o.length>s.children.length)for(let t of o)t.id==e.dataset.id&&o.splice(o.indexOf(t),1);else for(let t of o)t.id==e.dataset.id&&0==t.isComplete?t.isComplete=!0:t.id==e.dataset.id&&1==t.isComplete&&(t.isComplete=!1);localStorage.setItem("items",JSON.stringify(o))}function d(e,t,s=!1){return s?`<li class="tasks__task-item tasks__task-item_complete" data-id="${t}">\n                    <span>${e}</span>\n                    <button class="tasks__task-item__closed">X</button>\n                    <input type="checkbox" class="tasks__task-item__checkbox">\n                </li>`:`<li class="tasks__task-item" data-id="${t}">\n                    <span>${e}</span>\n                    <button class="tasks__task-item__closed">X</button>\n                    <input type="checkbox" class="tasks__task-item__checkbox">\n                </li>`}function m(){0==function(){let e=[];for(let t of a)t.checked&&e.push(t);return e.length}()?(n.classList.add("btns_hide"),c.classList.add("btns_hide"),i.classList.add("btns_hide")):(n.classList.remove("btns_hide"),c.classList.remove("btns_hide"),i.classList.remove("btns_hide"))}!function(){for(let e of o)s.insertAdjacentHTML("beforeend",d(e.text,e.id,e.isComplete))}(),e.addEventListener("click",(function(){if(t.value){let e=(1e3,9999,Math.floor(1e3+9e3*Math.random()));s.insertAdjacentHTML("beforeend",d(t.value,e)),r(t.value,e),t.value=""}})),s.addEventListener("click",(function(e){"BUTTON"==e.target.tagName&&(e.target.parentElement.remove(),r(e.target.parentElement)),m()})),s.addEventListener("click",(function(e){"LI"==e.target.tagName?(e.target.classList.toggle("tasks__task-item_complete"),r(e.target)):"SPAN"==e.target.tagName&&(e.target.parentElement.classList.toggle("tasks__task-item_complete"),r(e.target.parentElement))})),s.addEventListener("click",(function(e){"INPUT"==e.target.tagName&&e.target.checked?e.target.style.display="block":"INPUT"!=e.target.tagName||e.target.checked||(e.target.style.display="none"),m()})),n.addEventListener("click",(function(){for(let e of a)e.checked&&!e.parentElement.classList.contains("tasks__task-item_complete")&&(e.parentElement.classList.add("tasks__task-item_complete"),r(e.parentElement))})),c.addEventListener("click",(function(){document.querySelectorAll(".tasks__task-item__checkbox").forEach((function(e){e.checked&&(e.parentElement.remove(),r(e.parentElement))})),m()})),l.addEventListener("click",(function(){for(let e of a)e.checked||(e.style.display="block",e.checked=!0);m()})),i.addEventListener("click",(function(){for(let e of a)e.checked&&(e.checked=!1,e.style.display="none");m()}))})();