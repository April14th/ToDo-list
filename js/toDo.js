(()=>{"use strict";let t=document.querySelector(".todo-header__btn"),e=document.querySelector(".todo-header__input"),o=document.querySelector(".todo-body__tasks"),s=document.getElementsByClassName("todo-body__tasks__task-item__checkbox"),a=document.querySelector(".todo-body__btns__complete"),d=document.querySelector(".todo-body__btns__remove"),n=document.querySelector(".todo-body__btns__select"),c=document.querySelector(".todo-body__btns__clear"),l=localStorage.getItem("items")?JSON.parse(localStorage.getItem("items")):[];function _(t,e=""){if(l.length<o.children.length){let o=Object.assign({id:e},{text:t},{isComplete:!1});l.push(o)}else if(l.length>o.children.length)for(let e of l)e.id==t.dataset.id&&l.splice(l.indexOf(e),1);else for(let e of l)e.id==t.dataset.id&&0==e.isComplete?e.isComplete=!0:e.id==t.dataset.id&&1==e.isComplete&&(e.isComplete=!1);localStorage.setItem("items",JSON.stringify(l))}function i(t,e,o=!1){return o?`<li class="todo-body__tasks__task-item todo-body__tasks__task-item_complete" data-id="${e}">\n                    <span>${t}</span>\n                    <button class="todo-body__tasks__task-item__closed">X</button>\n                    <input type="checkbox" class="todo-body__tasks__task-item__checkbox">\n                </li>`:`<li class="todo-body__tasks__task-item" data-id="${e}">\n                    <span>${t}</span>\n                    <button class="todo-body__tasks__task-item__closed">X</button>\n                    <input type="checkbox" class="todo-body__tasks__task-item__checkbox">\n                </li>`}function r(){0==function(){let t=[];for(let e of s)e.checked&&t.push(e);return t.length}()?(a.classList.add("todo-body__btns_hide"),d.classList.add("todo-body__btns_hide"),c.classList.add("todo-body__btns_hide")):(a.classList.remove("todo-body__btns_hide"),d.classList.remove("todo-body__btns_hide"),c.classList.remove("todo-body__btns_hide"))}!function(){for(let t of l)o.insertAdjacentHTML("beforeend",i(t.text,t.id,t.isComplete))}(),t.addEventListener("click",(function(){if(e.value){let t=(1e3,9999,Math.floor(1e3+9e3*Math.random()));o.insertAdjacentHTML("beforeend",i(e.value,t)),_(e.value,t),e.value=""}})),o.addEventListener("click",(function(t){"BUTTON"==t.target.tagName&&(t.target.parentElement.remove(),_(t.target.parentElement)),r()})),o.addEventListener("click",(function(t){"LI"==t.target.tagName?(t.target.classList.toggle("todo-body__tasks__task-item_complete"),_(t.target)):"SPAN"==t.target.tagName&&(t.target.parentElement.classList.toggle("todo-body__tasks__task-item_complete"),_(t.target.parentElement))})),o.addEventListener("click",(function(t){"INPUT"==t.target.tagName&&t.target.checked?t.target.style.display="block":"INPUT"!=t.target.tagName||t.target.checked||(t.target.style.display="none"),r()})),a.addEventListener("click",(function(){for(let t of s)t.checked&&!t.parentElement.classList.contains("todo-body__tasks__task-item_complete")&&(t.parentElement.classList.add("todo-body__tasks__task-item_complete"),_(t.parentElement))})),d.addEventListener("click",(function(){document.querySelectorAll(".todo-body__tasks__task-item__checkbox").forEach((function(t){t.checked&&(t.parentElement.remove(),_(t.parentElement))})),r()})),n.addEventListener("click",(function(){for(let t of s)t.checked||(t.style.display="block",t.checked=!0);r()})),c.addEventListener("click",(function(){for(let t of s)t.checked&&(t.checked=!1,t.style.display="none");r()}))})();